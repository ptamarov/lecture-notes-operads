

\section{Methods to prove an operad is Koszul II}\label{lecture:methods2}

\subsection{Filtrations and rewriting}

In this section, we will focus on examples where
$\PP$ is a binary quadratic operad and one can
compute the homology of either the left or
right Koszul complex explicitly. By this, we
mean that one can pin down the result directly
by inspection, or use some mild homological tools,
like filtrations, to simplify the problem.

\begin{example}
Let us consider the associative operad $\As$,
which we study as a ns operad, as sending a ns
to the corresponding symmetric one does not
break Koszulness. In this case, we can compute
the Koszul complex 
$K =\As^\antishriek\circ_\tau \As$ explicitly. 

Namely, $\As^\antishriek(n)$ is one dimensional
for each $n\geqslant 1$ generated by a cooperation
$\mu_n^c$, and so is $\As(n)$, generated by the
iterated associative product $\mu_n$,
so that $K(n)$ is spanned by elements of the form
\[
[n_1,\ldots,n_k] = 
	\mu_k^c(\mu_{n_1},\ldots,\mu_{n_k}).
\]
Moreover, the decomposition map of $\As^\antishriek$
is dual up to one suspension to the (infinitesimal)
composition map of $\otimes\As$, that is, we can
explicitly compute that
\[
\Delta_{(1)}(\mu_k^c) = 
 \sum_{k_1+k_2 = k+1}
 	\sum_{i=1}^{k_1}(-1)^{(k_2-1)(i-1)}
 		 \mu_{k_1}^c\circ_i \mu_{k_2}^c.
\]
To compute the differential on a generic basis element
$B(k;n_1,\ldots,n_k)$, we need only restrict to the
case when $k_2=2$, since in this case the weight
one elements are precisely those of arity $2$.
Computing the corresponding composition, we arrive
at the following formula:
\[
\partial [n_1,\ldots,n_k] = 
\sum_{i=1}^{k-1} 
(-1)^{i-1}[n_1,\ldots,n_i+n_{i+1},\ldots,n_k].
\]
Thus, we see that $K(n)$ is isomorphic to the
complex computing the simplicial homology
of the $n-2$ simplex $\Delta^{n-2}$ spanned
by vertices $v_1,\ldots,v_{n-1}$ if we consider
sending the simplicial basis element
$[v_{i_1},\ldots,v_{i_k}]$ where
$i_1 < \cdots < i_k$ to the basis element
in $K(n)$ given by
$[i_1,i_2-i_1,\ldots,i_k-i_{k-1},n-i_k]$.

 \end{example}

%\textbf{Monomial quadratic operads.}
%A symmetric operad $\PP$ is said to be 
%monomial if it is generated by an
%alphabet $\XX$ subject to relations
%$\RR$ that are tree monomials. We will show
%in this section that every monomial quadratic
%operad is Koszul. Passing to the corresponding
%shuffle operad, it is clear in this case that
%$\PP^\f$ has $\RR^\f$ as a Gr\"obner basis  for any
%choice of order $\prec$, and that a linear
%basis for $\PP^\f$ consists of those shuffle tree
%monomials not divisible by any tree monomial in
%$\RR^\f$.
%
%First, let us begin by observing that the bar
%complex $\B{\PP}$ of a monomial operad is
%graded by the underlying tree monomial of a
%bar tree monomial, as the differential either
%sends a bar tree monomial to zero (if a divisor
%appears), or simply merges two ``large vertices''
%(perhaps introducing a sign) if no divisor appears.
%Thus, when computing the bar homology of $\PP$,
%we can assume that $\XX$ is finite and restrict
%only to those divisors of a fixed underlying
%tree monomial $T$, of which there are finitely many.
%
%Restricting to the case $\XX$ (and thus the
%quadratic collection of monomials $\RR$) is finite
%we notice that the dual is given by the complementary

Let us now consider a common homological technique to 
prove that complexes are acyclic. Let $(C,d)$ be
a chain complex, and suppose that $F$ is a filtration
of $C$, that is, a family 
$\{ F_p \}_{p\in\mathbb Z}$ of subcomplexes
such that $F_{p-1}\subseteq F_p$ for all
 $p\in \mathbb Z$ and such that their union is
 $C$; although this is a requirement for us, some
 people call such filtrations \emph{exhaustive}. For 
 reasons that will become apparent below,
 we will restrict ourselves to filtrations that are
 bounded below, that is, we will assume that $F_p=0$
 if $p<0$.\footnote{Note that we use $p$ for the
 indexing letter here: this is customary, to avoid
 confusing it with homological degrees.}
 
 If $(C,d,F)$ is a complex with a non-negative
 filtration, we define $\mathrm{gr}_F(C)$ to be
 the graded complex with $p$th graded piece given by
 the quotient $\mathrm{gr}_F(C)_p =   F_p/F_{p-1}$.
 This is indeed a complex, since $d$ preserves 
 each subcomplex of $F$.
 
 \begin{proposition}\label{prop:graded}
 Let $(C,d,F)$ be a non-negative chain
 complex with a filtration that is
 bounded below. If $(\mathrm{gr}_F(C),d)$ is
 acyclic, then the same is true for $C$.
\end{proposition}  
  
  \begin{proof}
  Pick $c\in C$ non-zero, 
  and suppose that $dc=0$,
  so that our aim is to show that $c$ is a boundary.
  By hypothesis, there exists a smallest $p$
  such that $c\in F_p$ but $c\notin F_{p-1}$,
  so let us proceed by induction on $p$.
  Since $c$ is a cycle in $C$, it is a cycle
  in $\mathrm{gr}_F C$. 
  By hypothesis, this complex is acyclic, 
  which means that there exists a class $[c']$
  such that $d[c'] = [c]$ in $F_p/F_{p-1}$. In
  other words, there exists $c_1\in F_p$ and
  $c'\in F_{p-1}$ such that
  $c- dc_1 = c'\in F_{p-1}$.
 Since $dc' = 0$, we know by induction that $c'=dc_2$
 for some $c_2$, and so $c = dc_1+dc_2$ is a
 boundary, too, like we wanted.
  \end{proof}
  
  \begin{example}
  \hacer{Lie to PreLie Koszul complex.}
  \end{example}
  
  

 
 \begin{lemma}
 Suppose that $(\PP,F)$ is a
 weight graded filtered shuffle operad.
 Then declaring a shuffle tree monomial $T$ in $\PP$
 to be in filtration degree $p$ if we have that
 \[\sum_{v\in T} p(\mathsf{x}_v) \leqslant p \]
 for the filtration degrees of its decorations
 in $\PP$ defines a filtration $\B{F}$ 
 of dg conilpotent
 cooperads on the shuffle bar construction
 $\B{\PP^\f}$.
 \end{lemma}
 
 \begin{proof}
 The filtration will be one of cooperads without
 imposing any compatibility conditions with the
 shuffle compositions of $\PP$. This
 later compatibility condition implies that
 the differential of the bar construction
 preserves the resulting subcomplexes,
 so that the filtration is in fact of dg
 cooperads.  \end{proof}
 
  Let us now consider the situation where $\PP$
 is a symmetric operad. Since the forgetful
 functor from symmetric to shuffle operads is
 monoidal, it preserves the bar construction,
 in the sense that $\B{\PP^\f}$ and
 $\B{\PP}^\f$ are naturally isomorphic,
 and we can attempt to apply filtration methods
 to the shuffle operad associated to $\PP$.
 Thus, in what follows, we will consider instead
 the case $\PP$ is a shuffle operad which is
 filtered, in the sense it admits a bounded
 below (exhaustive!) filtration by subcollections,
 such that for any shuffle composition we have
 \[
 F_p \circ_{\sigma,i} F_q \subseteq
  F_{p+q}\quad\text{for all $p,q$, all $i$
  and all shuffle permutations $\sigma$.}
 \]
 
 
 With this at hand, we arrive at one of the most
 useful criteria to check if a symmetric operad
 is Koszul. Note that a filtration compatible with
 the weight is simply a filtration of $\PP^\f$
 as a weight graded shuffle operad. 
 
 \begin{theorem}
 Let $\PP$ be a quadratic
 symmetric operad, and suppose
 that the shuffle operad $\PP^\f$ admits
 a filtration compatible with the weight
 (of shuffle operads) for which
 the associated graded operad is Koszul.
 Then $\PP$ is a Koszul operad.
 \end{theorem}
 
 \emph{Warning!} It is not true in general
 that if $\PP$ is an operad for which $\PP^\f$
 admits a filtration with Koszul associated
 graded, then $\PP$ is Koszul. Even in the case
 of associative algebras, there exist non-quadratic
 algebras $A$ along with a filtration $\mathcal F$
 such that $\mathrm{gr}_\mathcal F \, A \cong 
 \mathsf{Sym}(V)$, as in the case of the
 universal enveloping algebra of a non-Abelian
 Lie algebra. It is important for us that we
 are working with weight graded objects.
 
 \begin{proof}
 The only thing we have to show is that the
 associated graded conilpotent cooperad to
 $\B{\PP^\f}$ with respect to the filtration
 $\B{F}$ is isomorphic to $\B{\mathrm{gr}_F\PP^\f}$,
 and notice, as we remarked above, that
 weight degrees are respected.
 Indeed, once this is verified we conclude using
 Proposition~\ref{prop:graded} and our definition
 of Koszulness using the syzygy grading: the
 map $\PP^\antishriek \longrightarrow \B{\PP}$
 induces a quasi-isomorphism in $H^0$, so it suffices
 we prove that $\B{\PP}$ has no positive cohomology.
 
 By definition, the basis elements of
 $\mathrm{gr}_{\B{F}}\B{\PP^\f}$ of degree $p$
 are those shuffle tree monomials $T$
 whose decorations satisfy $T$
 \[
 \sum_{v\in T} p(\mathsf{x}_v) = p.
 \]
 At the same time, the shuffle operad 
 $\mathrm{gr}_F\PP^\f$  is graded and 
 thus its bar construction inherits an
 extra weight grading: the weight of a tree
 monomial $T$ is the sum of the weights of its
 decorations, so that $\mathsf{wt}(T)= p$
 precisely when
 \[
 \sum_{v\in T} \mathsf{wt}(\mathsf{x}_v) = p.
 \]
 Thus, we have a canonical map
 \[
 \mathrm{gr}_{\B{F}}\B{\PP^\f} \longrightarrow
 \B{\mathrm{gr}_F\PP^\f}
 \]
 which is an isomorphism, since the weight
 $\mathsf{wt}(\mathsf{x}_v)$ is precisely
 the least of those $p$ such that $\mathsf{x}_v
 \in F_p\PP^\f$, and if this drops, the total sum above
 will also drop.  \end{proof}
 
 The previous result can be used together with
 rewriting methods, as follows. If $\PP$ is
 a shuffle operad generated by a collection
 $\XX$, and we have chosen an admissible 
 monomial ordering $\prec $
 on $\FF_\XX$, the projection
 $\FF_\XX\longrightarrow \PP$ defines a filtration
 on $\PP$, by declaring that the class of a 
 monomial is in degree at most $p$ if it
 is represented by a monomial in the free shuffle
 operad of weight $p$: notice that we are being
 slightly imprecise with our notation, since now
 $p$ does not belong to the natural numbers,
 but rather to a totally order set (determined by
 our choice of monomial order).
 
 The resulting filtration $F_\prec$ in $\PP$
 defines a graded shuffle operad $\mathrm{gr}_\prec
 \PP$, and at the same time we have an associated
 operad $\PP_{\mathsf{mon}} = \FF_\XX / (\lead{\RR})$
 obtained by keeping only the leading terms
 of relations of $\PP$. Moreover, we have a map
 \[
 \pi : \PP_{\mathsf{mon}} 
  	\longrightarrow 
  	\mathrm{gr}_\prec \PP
 \]
 since the leading terms of $\RR$ define
 relations in the codomain, and in fact this
 map is an isomorphism in weights one and two.
 
 \begin{theorem}
 Let $\PP$ be a quadratic operad and suppose
 that the shuffle operad $\PP^\f$ admits a
 quadratic Gr\"obner basis with respect to some
 monomial order $\prec$. Then $\PP$ is
 Koszul. 
 \end{theorem}
 
 \begin{proof}
 By the previous theorem, it suffices to show
 that $\mathrm{gr}_\prec \PP$ is Koszul. We
 see that this operad is isomorphic to the
 quotient of $\PP$ by the initial ideal associated
 to $\RR$. Thus, $\pi$ is an isomorphism 
 precisely when $\RR$ is a Gr\"obner basis
 for $(\RR)$ with respect to $\prec$, and
 it suffices to show
 a shuffle operad with quadratic monomial
 relations is Koszul, which we have
 already done. Thus,
 the claim follows for
 $\PP^\f$, which is what we wanted. 
 \end{proof}
 

\begin{example}
We have checked (or rather, suggested as Exercise~\ref{ex:SpolyLie})
that the shuffle operad $\mathsf{Lie}^\f$ has a quadratic Gr\"obner
basis where the Jacobi relation is the only element. It follows
that the Lie operad is Koszul and, hence, that the commutative
operad is Koszul, too. We will prove in Exercise~\ref{ex:quadratic-GB-dual} that in fact the Koszul dual of a shuffle operad with
a quadratic Gr\"obner basis also admits a Gr\"obner basis.
\end{example}

The following figure tabulates some well-known
quadratic operads, their shuffle generators,
and a choice of order that yields a quadratic
Gr\"obner basis. We have already introduced the
operads $\mathsf{PreLie}$, $\mathsf{Perm}$ and
$\mathsf{Poiss},\mathsf{Dend}$, 
and we will define and
very briefly look at the
remaining ones
in the exercises below.
They were introduced, along with
the dendriform operad, by
J.-L. Loday; see~\cite{LodayDialg, LodayLeib}.

\begin{center}
\begin{tabular}{@{}lccc@{}} \toprule
Operad & Type & $\Sha$-generators & Order \\
\midrule 
PreLie & $\Sigma$ & $\circ,\bar\circ$ & 
	\texttt{deglex perm} for $\bar\circ \prec \circ$.\\
Perm &   $\Sigma$ & $\cdot,\bar\cdot$ &
	\texttt{deglex perm} for $\cdot \prec \bar \cdot$  \\
Zinb &  $\Sigma$  & $\cdot,\bar\cdot$ &
	\texttt{deglex perm} for $\cdot \prec \bar \cdot$ \\

Leib &  $\Sigma$  & $\cdot,\bar\cdot$ & 
	\texttt{deglexr perm} for $\bar\cdot \prec \cdot$\\

Poiss &   $\Sigma$ & $\mu,\beta$ & \texttt{quantum} for $\mu\mapsto x,\beta\mapsto y$ \\
Dend &  ns  & $\prec,\succ$ & \texttt{deglex} for $\prec\; < \;\succ$\\
Dias &   ns  & $\vdash,\dashv$ & \texttt{deglex} for $\dashv\; < \; \vdash$\\
\bottomrule
\end{tabular}
\end{center}




\subsection{Distributive laws}

If $V$ and $W$ are associative algebras, and if we
are given a map $\tau : W\otimes V\longrightarrow V\otimes W$,
we can consider defining a new associative algebra structure
on $V\otimes W$ by first using the map
\[
V\otimes W\otimes V\otimes W 
	\xrightarrow{1\otimes \tau\otimes x}
	 V\otimes V\otimes W\otimes W
	 \]
and then the products of $V$ and $W$. This map will be
associative precisely when $\tau$ satisfies a certain
compatibility condition with $\mu_V$ and $\mu_W$. The upshot
is that one obtains a new associative algebra
$V\otimes_\tau W$ where elements of $V$ and $W$ do not
commute, but we have
\[ 1\otimes w\cdot v\otimes 1 = \tau(v\otimes w).
\]
One can produce a completely analogous formalism 
for algebraic operads, as it was done by Markl 
in~\cite{MarklDistributive}, later extended
in~\cite{Vallette2004,Dotsenko2007},
see also \cite{Dotsenko2014}. Let us begin by 
looking at two examples that motivate
the theory.

\begin{example}
The operad $\mathsf{Poiss}$ governing
Poisson algebras is obtained from the
Lie and commutative operads by the Leibniz
rule: if we write $x_1x_2$ for the commutative
product and $[x_1,x_2]$ for the Lie bracket,
then Leibniz rule says that the element
\[
[x_1,x_2x_3] \in \mathsf{Lie}\circ_\Sigma\mathsf{Com}
\]
is equal to the element
\[
[x_1,x_2]x_3 + [x_1,x_3]x_2\in
\mathsf{Com}\circ_\Sigma\mathsf{Lie}.
\]
In fact, repeated uses of the Leibniz rule
allow us to define a map
\[\lambda : \mathsf{Lie}\circ_\Sigma\mathsf{Com}
\longrightarrow \mathsf{Com}\circ_\Sigma\mathsf{Lie}
\]
and one can think of the Poisson operad as
obtained by putting on $\mathsf{Com}\circ_\Sigma\mathsf{Lie}$ the unique operad
structure (as in our example with associative
algebras) that uses $\lambda$ to exchange 
elements from $\mathsf{Lie}$ and $\mathsf{Com}$.
\end{example}

\begin{example}
Let us now consider the associative operad
$\mathsf{Ass}$, and write $x_1x_2$ for its associative
operation. By Exercise~\ref{ex:LivLod}, we know
that the operations
\[ 
[x_1,x_2] = \frac{1}{2} (x_1x_2-x_2x_1),\quad
x_1\cdot x_2 = \frac{1}{2} (x_1x_2+x_2x_1)\]
present $\mathsf{Ass}$ 
through the Jacobi relation for $[x_1,x_2]$,
the Leibniz rule between this bracket and the
commutative product $x_1\cdot x_2$,
and the following relation 
\[
(x_1\cdot x_2)\cdot x_3 - 
x_1\cdot (x_2\cdot x_3) = [x_2,[x_1,x_3]]
\]
expressing the failure of the commutative
product to be associative. In particular,
the last relation tells us that we must
\emph{modify} the associativity relation
for the product in $\mathsf{Com}$ to 
obtain a presentation for $\mathsf{Ass}$,
which is still isomorphic to $\mathsf{Com}
\circ_\Sigma \mathsf{Lie}$ as a symmetric
sequence. Recently,
using Gr\"obner bases and computational commutative algebra,
Bremner and Dotsenko proved
that this is the only 
non-trivial way to deform the Poisson
operad into the associative operad~\cite{Bremner2020}.
\end{example}

Let us now introduce the formal theory to 
deal with examples like those above. We
will follow the exposition of~\cite{Bremner2016}*{Section 6.3.5}, but see also~\cite{Loday2012}*{Section 8.6} and~\cite{Dotsenko2014}.

\begin{definition}\label{def:distrule}
Let $\PP = \FF(\XX,\RR)$ and $\QQ = \FF(\YY,\mathcal{S})$ be two quadratic operads. A
distributing rewriting rule for the
pair $(\PP,\QQ)$ is the datum
of two maps 
\[
s : \RR \longrightarrow (\XX\circ_{(1)}\YY)
				\oplus (\YY\circ_{(1)}\XX)
				\oplus (\YY \circ_{(1)}\YY),
				\quad
d : \YY\circ_{(1)} \XX \longrightarrow
 	 (\XX\circ_{(1)} \YY)\oplus (\YY\circ_{(1)}
 	 \YY).
\]
\end{definition}

If we consider the collection  of generators 
$\XX\oplus \YY$, the graphs $\Gamma_s  = \{ r - s(r) : r\in\RR\}$ and $\Gamma_d = \{
x - d(x) : x\in \YY\circ_{(1)} \XX\}$
are quadratic relations in the free
operad $\FF_{\XX\oplus \YY}$. The first
is a deformed version of the original relations
of $\RR$, which incorporates terms with
at most one appearance of generators of $\PP$, while the second is a new set
of ``distributive type'' relations, which
rewrite elements in $\YY\circ_{(1)}\XX$
into elements of $\XX\circ_{(1)}\YY$
at the cost of adding some
summands that are 
elements of $\YY\circ_{(1)}\YY$,
where no element of $\PP$ appears.

Notice that using $d$
after an application of $s$, we may instead
assume that $s$ is actually a map
of the form 
\[
s : \RR \longrightarrow (\XX\circ_{(1)}\YY)
				\oplus (\YY \circ_{(1)}\YY),\]
which we will do in what follows.
\begin{definition}
The quadratic operad 
obtained from the pair $(\PP,\QQ)$
through the filtered distributive rule
$\lambda = (s,d)$ is the operad generated
by $\XX\oplus \YY$ subject to the relations
$\Gamma_s,\Gamma_d$ and $\mathcal S$,
and we write it $\PP\vee_\lambda \QQ$.
\end{definition}

Notice that ``setting variables to zero''
induces surjections of operads
$\pi_1 : \PP\vee_\lambda \QQ\longrightarrow \PP$
and $\pi_2: \PP\vee_\lambda \QQ\longrightarrow \QQ$.
Since the relations of $\QQ$ are
not modified in $\PP\vee_\lambda \QQ$, the
second surjection always splits (through
the usual inclusion) but,
as our second example above shows,
the first surjection may or may not
split depending on the ground field
(in that example, it does not split
if it divides $6$). 
We say a distributing rule is
\emph{split} if the first
surjection above splits. 
In this case, the following holds.

\begin{lemma}
For every split distributing rule,
there is a surjection of symmetric
collections
$\xi: \PP\circ_\Sigma \QQ 
\longrightarrow \mathcal \PP\vee_\lambda \QQ
$  induced by the composite
$\FF_\XX\circ_\Sigma\FF_\YY\longrightarrow
\FF_{\XX\oplus \YY} 
\longrightarrow \mathcal \PP\vee_\lambda \QQ$.
\end{lemma}

\begin{proof}
Let us first prove that the composite arrow 
in the statement of the lemma is surjective. 
To see this, it suffices to notice that
the second arrow is surjective, by
definition of $\PP\vee_\lambda \QQ$, and that
the relations of $\PP\vee_\lambda \QQ$ guarantee
that every tree monomial where an element
of $\FF_\YY$ appears below one of 
$\FF_\XX$ can be rewritten into one
of $\FF_\XX\circ_\Sigma\FF_\YY$.
This show that such map is surjective,
as we claimed, and proves that every element of
$\PP\vee_\lambda \QQ$ can at least be arranged to be
a tree monomial with decorations in $\XX$
with tree monomials with decorations in $\YY$
grafted at its leaves.

For a second step, let us consider the
weight grading of $\FF_{\XX\oplus\YY}$
where $\XX$ is put in weight one and
$\YY$ in weight zero. This weight
grading induces a filtration on this free
operad and, in turn, a filtration on the
quotient $\PP\vee_\lambda \QQ$. 
Moreover, in $\mathrm{gr}(\PP\vee_\lambda \QQ)$
the relations coming from $\Gamma_s$ turn
into the relations $\RR$ of $\PP$, as
$s$ strictly decreases the filtration 
degree of a tree monomial: the relations
$\RR$ lie in filtration degree two,
but the image of $s$ contains only elements
of filtration degrees zero or one. 
Thus, together with the fact that the
projection $\pi_1$ splits, we see
that the map
$\mathrm{gr}(\FF_\XX\circ_\Sigma\FF_\YY)
\longrightarrow
\mathrm{gr}(\PP\vee_\lambda \QQ)$
gives rise to a surjective map of sequences
\[
\PP\circ_\Sigma\QQ
\longrightarrow
\PP\vee_\lambda \QQ,
\]
bearing in mind that taking associated
graded operads does not modify the 
underlying symmetric sequences.
\end{proof}

Notice that, since the relations
of $\PP$ are deformed in $\mathcal E$,
there is a priori no map of operads
$\PP\longrightarrow \mathcal E$. Notice
also that the surjection $\pi_1$ always
splits if $s=0$, so that the relations of
$\PP$ remain undeformed, or if the
characteristic of the field is zero. 

\begin{definition}
We say that a split distributing rule
$\lambda = (s,d)$ 
for a pair $(\PP,\QQ)$  is a 
filtered distributive law if $\xi$ is
an isomorphism. 
\end{definition}

The following is the main result of this
section.

\begin{theorem}[Filtered distributive law
criterion] Let $\PP$ and $\QQ$ be quadratic
Koszul, and suppose that $\lambda = (s,d)$ is a split filtered distributing rule for the pair
$(\PP,\QQ)$. 
\begin{tenumerate}
\item The distributing rule is a filtered
distributive law if and only if $\xi^{(3)}$
is injective.
\item In this case, $\mathcal E$ is Koszul. 
\end{tenumerate}
\end{theorem}

\begin{proof}
Let us begin by proving (2) and, to do this, 
let us consider the situation
where $d$ and $s$ are zero. In this case,
it is clear that $\mathcal E =\PP\vee_0 \QQ$ 
is isomorphic
as an operad to $\PP\circ_\Sigma \QQ$
where the operad structure is given
by the zero exchange map. Since we 
need to apply the K\"unneth theorem 
for $-\circ_\Sigma-$, which is a priori
only available in zero characteristic,
we may as well pass to the situation
where we are working with reduced shuffle
operads. In this case, no symmetric groups
are involved, and so the K\"unneth theorem 
for $-\circ_\Sha-$ works in full generality
for any characteristic (as long as we are
working over a field).

In this case, the Koszul dual $\mathcal E^\f$ is isomorphic to 
$\QQ^{\f,\antishriek}\circ_\Sha\PP^{\f,\antishriek}$.
By considering the weight grading of $\QQ$,
the Koszul complex of $\mathcal E^\f$ can
then by filtered in such a way that
$E^0 \cong (\QQ^{\f,\antishriek}\circ_\Sha K(\PP^\f) \circ_\Sha \QQ^\f, 1\circ d\circ 1)$
and, since $\PP$ is Koszul, we see that 
$E^1 \cong (K(\QQ^\f),d)$.
Finally, since $\QQ^\f$ is also Koszul, 
we arrive at
a trivial $E^2$-page, proving that $\mathcal{E}^\f$
and hence $\mathcal E$, is Koszul in this case. 

In the general case, it is still true
that $\mathcal{E}^\f$ is isomorphic to $\PP^\f\circ_\Sha\QQ^\f$,
and so its bar construction has the same underlying
symmetric sequence, but a different differential.
Its elements consists of shuffle tree monomials
whose vertices are decorated by elements of 
$\PP^\f\circ_\Sha\QQ^\f$. We may first
assume that $s=0$ and that $d$ has image in
$\XX\circ_{(1)}\YY$ by considering
the filtration that counts the number
of occurrences of elements in $\QQ$,
as we did before. Let us now explain how
to reduce even further to the case where
$d=0$, which will conclude the proof.

We may think of the bar tree monomials as tree
monomials decorated by $\PP$ and $\QQ$,
so we can consider the map that assigns
such a tree monomial to an element
in ${\mathbb W}_\mathsf{QM}$, by
first replacing all occurrences of $\PP$
by $x$ and all of those by $\QQ$ by $y$,
and then computing the corresponding
path sequence that lives in${\mathbb W}_\mathsf{QM}$. This path sequence will consist of several
monomials in $x$, $y$ and $q$, which we can
compare using the ordered shuffle operad
${\mathbb W}_\mathsf{QM}$. This induces
a filtration on the bar complex, that is
indexed by ${\mathbb W}_\mathsf{QM}$.

Any tree in $\YY\circ_{(1)}\XX$ will be
in filtration degree larger than any tree
in $\XX\circ_{(1)}\YY$, since all the path 
sequences
$(xyq,xyq,y)$, $(xyq,y,xyq)$ and $(y,xyq,xyq)$
are larger than the path sequences 
$(xy,xy,y)$, $(xy,y,xy)$ and $(x,xy,xy)$:
we have that $y > yx > xy > x$ in the order of 
$\mathsf{QM}$. Thus, we see that passing
to the associated graded complex, we obtain
the bar complex of $\mathcal E\cong \PP^\f\circ_\Sha\QQ^\f$
in the case that $\lambda = (0,0)$, which
we have already addressed, as we wanted. 

We sketch a proof of (1), and point
the reader to Theorem 8.6.5 in~\cite{Loday2012}
for details, noting as before that we
may first assume $s=0$.
Let us notice first that
$\xi: \PP\circ_\Sigma\QQ\longrightarrow
 \PP\vee_\lambda \QQ$ is an isomorphism in
 weights 0, 1 and 2, and that if it is also
 an isomorphism in weight 3, the underlying
 sequences of the bar
 constructions $\mathsf{B}(\PP\circ_\Sigma\QQ)$
 and $\mathsf{B}(\PP\vee_\lambda \QQ)$ are isomorphic
 in syzygy degrees at most 2. This allows us
 to filter these bar complexes and, by a 
 spectral sequence argument, deduce that
 $\PP\vee_\lambda \QQ$ and $\PP\circ_\Sigma\QQ\cong
  \PP\vee_0 \QQ$ have isomorphic Koszul dual
 cooperads. Running the argument again, but
 replacing $\B$ with $\Omega$ and 
 working with the dual cooperads, we deduce
 that  $\PP\vee_\lambda \QQ$ and $\PP\vee_0 \QQ$ are isomorphic via $\xi$.
\end{proof}
\newpage


\subsection{Exercises}

\begin{question}
The operad of diassociative algebras is the
ns operad generated by two binary 
associative operations
$x: (x_1,x_2) \longmapsto x_1\vdash x_2$ and
$y: (x_1,x_2) \longmapsto x_1\dashv x_2$ subject
to the three additional relations
\begin{align*}
 x_1 \dashv (x_2 \dashv x_3) &= x_1 \dashv (x_2 \vdash x_3) \\
 (x_1 \vdash x_2) \dashv x_3 &= x_1 \vdash (x_2 \dashv x_3) \\
(x \dashv x_2) \vdash x_3 &= (x_1 \vdash x_2) \vdash x_3.
\end{align*}
\begin{tenumerate}
\item Compute the Koszul dual operad. Show
it is equal to the operad $\mathsf{Dend}$
of Exercise~\ref{ex:Dend}.
\item Conclude, using Exercise~\ref{ex:quadratic-GB-dual}, that $\mathsf{Dias}$ also admits
a quadratic Gr\"obner basis. For which
order?
\end{tenumerate}
\end{question}

\begin{question}
\hacer{Leibniz and Zinbiel}
\end{question}
\begin{question}\label{ex:quadratic-GB-dual} 
Let $\PP$ be a quadratic operad, generated by a \emph{set}
of variables $\XX$ subject to relations $\RR$, 
and endow $\FF_\XX^\Sha$ with some
admissible monomial order. Identify $\sus^{-1}\otimes \XX^*$
with $\XX$ through the canonical pairing, and consider
the opposite order on $\FF_{\XX^\vee}^\Sha$ 
under this identification.
\begin{tenumerate}
\item Show that if $\mathcal B$ is the linearly self-reduced
basis of $\RR$ and $\mathcal B^\perp$ the linearly self-reduced
basis of $\RR^\perp$, then $\leadm{\mathcal B}\sqcup
\leadm{\mathcal B^\perp} = \FF_\XX^{\Sha,(2)}$.
\item The set of tree monomials for which every quadratic divisor belongs to $\leadm{\mathcal B}$ spans $\PP^!$. In particular, these give
arity-wise upper bounds for the dimension of $\PP^!$.
\item This upper bound is sharp for all $n$ such that $\FF_\XX^{\Sigma,(3)}(n) \neq 0$ if and only if the operad $\PP^!$ has a quadratic 
Gr\"obner basis.
\item The operad  $\PP$ has a quadratic 
Gr\"obner basis if and only if its Koszul dual operad does. 
\end{tenumerate}
\end{question}